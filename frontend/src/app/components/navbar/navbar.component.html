<div class="mx-auto px-4 max-w-screen-xl">
  <div
    class="flex items-center md:order-2 space-x-1 md:space-x-0 rtl:space-x-reverse"
  >
    <!-- Language Button -->
    <button
      type="button"
      (click)="isDropdownOpen = !isDropdownOpen"
      class="inline-flex items-center font-medium justify-center px-4 py-2 text-sm border text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"
    >
      <!-- Dynamically switch SVG based on selected language -->
      <svg
        [ngClass]="{
          block: selectedLanguage === 'en',
          hidden: selectedLanguage !== 'en'
        }"
        class="w-5 h-5 rounded-full mr-3"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 3900 3900"
      >
        <path fill="#b22234" d="M0 0h7410v3900H0z" />
        <path
          d="M0 450h7410m0 600H0m0 600h7410m0 600H0m0 600h7410m0 600H0"
          stroke="#fff"
          stroke-width="300"
        />
        <path fill="#3c3b6e" d="M0 0h2964v2100H0z" />
        <g fill="#fff">
          <g id="d">
            <g id="c">
              <g id="e">
                <g id="b">
                  <path
                    id="a"
                    d="M247 90l70.534 217.082-184.66-134.164h228.253L176.466 307.082z"
                  />
                  <use xlink:href="#a" y="420" />
                  <use xlink:href="#a" y="840" />
                  <use xlink:href="#a" y="1260" />
                  <use xlink:href="#a" y="1680" />
                </g>
                <use xlink:href="#a" y="1680" />
              </g>
              <use xlink:href="#b" x="247" y="210" />
            </g>
            <use xlink:href="#c" x="494" />
          </g>
          <use xlink:href="#d" x="988" />
          <use xlink:href="#c" x="1976" />
          <use xlink:href="#e" x="2470" />
        </g>
      </svg>
      <svg
        [ngClass]="{
          block: selectedLanguage === 'fr',
          hidden: selectedLanguage !== 'fr'
        }"
        class="w-5 h-5 rounded-full mr-3"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
      >
        <g fill="evenodd">
          <path fill="#0055A4" d="M0 0h170v512H0z" />
          <path fill="#FFFFFF" d="M170 0h170v512H170z" />
          <path fill="#EF4135" d="M340 0h170v512H340z" />
        </g>
      </svg>
      <!-- Dynamically change language name -->
      {{ selectedLanguage === "en" ? "English" : "Fran√ßais" }}
    </button>

    <!-- Dropdown Menu -->
    <div
      *ngIf="isDropdownOpen"
      class="z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700"
    >
      <ul class="py-2 font-medium" role="none">
        <li>
          <button
            (click)="useLanguage('en')"
            class="block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white"
          >
            {{ "NAVBAR.LANG_EN" | translate }}
          </button>
        </li>
        <li>
          <button
            (click)="useLanguage('fr')"
            class="block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white"
          >
            {{ "NAVBAR.LANG_FR" | translate }}
          </button>
        </li>
      </ul>
    </div>
  </div>
</div>

<nav class="bg-white border-gray-200 dark:bg-gray-900">
  <div
    class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto px-4"
  >
    <a routerLink="/" class="flex items-center">
      <img
        src="assets/images/logo-transparent-png.png"
        class="w-20 h-20"
        alt="logo"
      />
    </a>

    <!-- Mobile and Desktop Language Button Toggle -->
    <div
      class="flex items-center md:order-2 space-x-1 md:space-x-0 rtl:space-x-reverse"
    >
      <button
        (click)="isMenuOpen = !isMenuOpen"
        type="button"
        class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
      >
        <span class="sr-only">Open main menu</span>
        <svg
          class="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 17 14"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M1 1h15M1 7h15M1 13h15"
          />
        </svg>
      </button>
    </div>

    <div
      class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1"
      id="navbar-language"
    >
      <!-- Dropdown menu for categories -->
      <button
        id="dropdownUsersButton"
        data-dropdown-toggle="dropdownUsers"
        data-dropdown-placement="bottom"
        class="md:mr-10 text-white/90 font-semibold bg-green-darker hover:bg-green focus:outline-none rounded-lg text-base px-5 py-2 text-center inline-flex items-center"
        type="button"
      >
        Nos categories
        <svg
          class="w-2.5 h-2.5 ms-3"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 10 6"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m1 1 4 4 4-4"
          />
        </svg>
      </button>
      <div
        id="dropdownUsers"
        class="z-50 hidden bg-white rounded-lg shadow w-80"
      >
        <ul
          class="h-80 py-5 overflow-y-auto text-primary text-base"
          aria-labelledby="dropdownUsersButton"
        >
          <li *ngFor="let category of categories" class="category-item">
            <a href="#" class="flex items-center px-4 py-2 hover:bg-itemsBg">
              <img
                class="w-8 h-8 me-2 rounded-full svg-icon"
                [src]="
                  category.imageUrl ||
                  'assets/images/default-category-image.png'
                "
                [alt]="category.name"
              />
              {{ category.name }}
            </a>
          </li>
        </ul>
      </div>

      <ul
        class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700"
      >
        <li>
          <a routerLink="/" class="text-primary font-medium nav-link block py-2"
            >Home</a
          >
        </li>
        <li>
          <a
            routerLink="/about-us"
            class="text-primary font-medium nav-link block py-2"
            >About</a
          >
        </li>
        <li>
          <a
            routerLink="/projects"
            class="text-primary font-medium nav-link block py-2"
            >Projects</a
          >
        </li>
        <li>
          <a
            routerLink="/contact"
            class="text-primary font-medium nav-link block py-2"
            >Contact</a
          >
        </li>
      </ul>
    </div>

    <div class="order-3">
      <!-- Client Settings -->
      <div
        class="relative w-10 h-10 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600"
      >
        <svg
          id="avatarButton"
          type="button"
          data-dropdown-toggle="userDropdown"
          data-dropdown-placement="bottom-start"
          class="absolute w-12 h-12 text-gray-400 -left-1 cursor-pointer"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
            clip-rule="evenodd"
          ></path>
        </svg>
      </div>

      <!-- User Dropdown menu -->
      <div
        id="userDropdown"
        class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 dark:divide-gray-600"
      >
        <ul
          class="py-2 text-sm text-gray-700 dark:text-gray-200"
          aria-labelledby="avatarButton"
        >
          <li>
            <a
              routerLink="/authenticate"
              class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
              >Se connecter</a
            >
          </li>
          <li>
            <a
              routerLink="/"
              class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
              >Settings</a
            >
          </li>
          <li>
            <a
              routerLink="/"
              class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
              >Devenir client</a
            >
          </li>
        </ul>
        <div class="py-1">
          <a
            routerLink="/"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white"
            >Sign out</a
          >
        </div>
      </div>
    </div>
  </div>
</nav>
